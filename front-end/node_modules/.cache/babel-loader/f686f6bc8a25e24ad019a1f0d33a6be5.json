{"ast":null,"code":"import _classCallCheck from \"/home/zecheng3/workspace/cs411/cs411_project/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/zecheng3/workspace/cs411/cs411_project/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/zecheng3/workspace/cs411/cs411_project/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/zecheng3/workspace/cs411/cs411_project/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/zecheng3/workspace/cs411/cs411_project/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/zecheng3/workspace/cs411/cs411_project/front-end/src/components/Details/Details.jsx\";\nimport React, { Component } from 'react';\nimport { Form, FormInput, Button, Item, Image, Header, Grid, Input } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './Details.scss';\nimport NavBar from '../NavBar.jsx'; //import history from '../history.js';\n\nrequire('./Details.scss');\n\nvar Details =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Details, _Component);\n\n  function Details() {\n    var _this;\n\n    _classCallCheck(this, Details);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Details).call(this));\n    _this.state = {\n      reviews: [],\n      movie: {},\n      user: '',\n      value: ''\n    };\n    return _this;\n  }\n\n  _createClass(Details, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var mid = this.props.match.params.movieId;\n      axios.get(\"http://localhost:8000/search/movieId/\" + this.props.match.params.movieId).then(function (response) {\n        //-----------TODO: change the id to this.props.match.params.movieId-----------\n        //-----------ADD AFTER THE POST FINISHED-----------\n        _this2.setState({\n          movie: response.data[0]\n        });\n\n        return axios.get(\"http://localhost:8000/reviews/\" + mid);\n      }).then(function (response) {\n        console.log(response.data);\n\n        _this2.setState({\n          reviews: response.data\n        }); //return axios.get(\"http://localhost:8000/reviews/\" + this.props.match.params.movieId)\n\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"searchHandler\",\n    value: function searchHandler(event) {\n      // console.log(\"state search\", event.target.value);\n      this.setState({\n        value: event.target.value\n      });\n    }\n  }, {\n    key: \"likeHandler\",\n    value: function likeHandler(event) {}\n  }, {\n    key: \"dislikeHandler\",\n    value: function dislikeHandler(event) {}\n  }, {\n    key: \"handleReviewPost\",\n    value: function handleReviewPost(event) {\n      var _this3 = this;\n\n      // console.log(\"input: \", this.state.value);\n      var postreview = {\n        Content: this.state.value,\n        MovieId: this.props.match.params.movieId,\n        Num_likes: 0,\n        Num_dislikes: 0\n      };\n      axios.post(\"http://localhost:8000/reviews/\", postreview).then(function (response) {\n        // console.log(response.data);\n        _this3.componentDidMount();\n      });\n    }\n  }, {\n    key: \"handleMovieList\",\n    value: function handleMovieList(event) {\n      var info = {\n        movie_id: this.props.match.params.movieId,\n        uid: window.sessionStorage.getItem('userId')\n      };\n      axios.put('http://localhost:8000/users', info);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, this.state.movie['original_title']), React.createElement(\"img\", {\n        src: \"poster/dumbo.jpg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Input, {\n        placeholder: \"New Review\",\n        fluid: true,\n        value: this.state.value,\n        onChange: this.searchHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"lowerPanel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"render list here\"), React.createElement(MovieGridList, {\n        reviews: this.state.reviews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Details;\n}(Component);\n\nexport default Details;\n\nfunction MovieGridList(props) {\n  // console.log(\"movie grid list\", props);\n  return React.createElement(\"ul\", {\n    className: \"popular-list-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, props.reviews.map(function (review) {\n    var _this4 = this;\n\n    // console.log(review);\n    var reviewId = review.id; // var index = getIndex(url);\n    // moviePoster = <img className='picture-gallery' src={\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/\"+ index + \".png\"} onClick={()=>history.push(\"/detail/\"+index)}/>;\n\n    return React.createElement(\"div\", {\n      key: reviewId,\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"popular-item-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, review.Content), React.createElement(Button.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: function onClick() {\n        return _this4.likeHandler;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, review.Num_likes), React.createElement(Button, {\n      onClick: function onClick() {\n        return _this4.dislikeHandler;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, review.Num_dislikes)))));\n  }));\n}","map":{"version":3,"sources":["/home/zecheng3/workspace/cs411/cs411_project/front-end/src/components/Details/Details.jsx"],"names":["React","Component","Form","FormInput","Button","Item","Image","Header","Grid","Input","Link","axios","PropTypes","styles","NavBar","require","Details","state","reviews","movie","user","value","mid","props","match","params","movieId","get","then","response","setState","data","console","log","catch","err","event","target","postreview","Content","MovieId","Num_likes","Num_dislikes","post","componentDidMount","info","movie_id","uid","window","sessionStorage","getItem","put","searchHandler","bind","MovieGridList","map","review","reviewId","id","likeHandler","dislikeHandler"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, FormInput,Button, Item, Image, Header, Grid, Input} from 'semantic-ui-react';\n\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\n\nimport styles from './Details.scss';\nimport NavBar from '../NavBar.jsx'\n\n//import history from '../history.js';\nrequire('./Details.scss');\nclass Details extends Component{\n  constructor(){\n    super();\n    this.state = {\n      reviews:[],\n      movie: {},\n      user: '',\n      value: ''\n    };\n\n  }\n\n  componentDidMount(){\n    var mid = this.props.match.params.movieId;\n    axios.get(\"http://localhost:8000/search/movieId/\" + this.props.match.params.movieId)\n      .then((response) => {\n        //-----------TODO: change the id to this.props.match.params.movieId-----------\n        //-----------ADD AFTER THE POST FINISHED-----------\n        this.setState({movie: response.data[0]});\n        return axios.get(\"http://localhost:8000/reviews/\" + mid);\n      })\n      .then((response) => {\n        console.log(response.data);\n        this.setState({reviews: response.data});\n        //return axios.get(\"http://localhost:8000/reviews/\" + this.props.match.params.movieId)\n      }).catch((err) => {\n        console.log(err)\n      })\n\n  }\n  searchHandler(event) {\n\t\t// console.log(\"state search\", event.target.value);\n\t\tthis.setState({value: event.target.value});\n\t}\n\n  likeHandler(event) {\n\n  }\n\n  dislikeHandler(event) {\n\n  }\n\n  handleReviewPost(event){\n    // console.log(\"input: \", this.state.value);\n    var postreview = {Content: this.state.value, MovieId: this.props.match.params.movieId, Num_likes:0, Num_dislikes:0};\n    axios.post(\"http://localhost:8000/reviews/\",postreview)\n    .then((response) => {\n      // console.log(response.data);\n      this.componentDidMount();\n    });\n  }\n\n  handleMovieList(event) {\n    var info = {movie_id: this.props.match.params.movieId, uid: window.sessionStorage.getItem('userId')};\n    axios.put('http://localhost:8000/users', info);\n  }\n\n  render(){\n\n    return(\n      <div>\n      <NavBar/>\n        <div class =\"row\">\n            <div class = \"column\">\n              <p>{this.state.movie['original_title']}</p>\n              <img src = \"poster/dumbo.jpg\"/>\n            </div>\n            <div class = \"column\">\n\n            <Input placeholder='New Review' fluid value={this.state.value} onChange={this.searchHandler.bind(this)}/>\n  \n\n            </div>\n        </div>\n        <div className=\"lowerPanel\">\n          <p>render list here</p>\n          <MovieGridList reviews={this.state.reviews}/>\n        </div>\n\n      </div>\n\n\n    );\n\n  }\n\n\n}\nexport default Details;\n\nfunction MovieGridList(props) {\n    // console.log(\"movie grid list\", props);\n\t\treturn(\n\t\t\t<ul className='popular-list-list'>\n\t\t\t\t{\n\t\t\t\t\t(props.reviews).map(function(review){\n            // console.log(review);\n\n\t\t        var reviewId = review.id;\n\t\t        // var index = getIndex(url);\n\n\t\t\t\t\t\t// moviePoster = <img className='picture-gallery' src={\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/\"+ index + \".png\"} onClick={()=>history.push(\"/detail/\"+index)}/>;\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<div key={reviewId} className='card'>\n\t\t\t\t\t\t\t\t<Grid>\n\t\t\t\t\t\t\t\t\t<Grid.Column>\n                    <p className='popular-item-list'>\n                    \t{review.Content}\n                    </p>\n                    <Button.Group>\n                      <Button onClick={()=>this.likeHandler}>{review.Num_likes}</Button>\n                      <Button onClick={()=>this.dislikeHandler}>{review.Num_dislikes}</Button>\n                    </Button.Group>\n\t\t\t\t\t\t\t\t\t</Grid.Column>\n\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n        })\n\t\t\t\t}\n\t\t\t</ul>\n\t\t)\n\n}\n"]},"metadata":{},"sourceType":"module"}